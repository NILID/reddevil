- index = substrate_counter + 1
= content_tag_for(:tr, substrate, class: "#{substrate.state_css}") do
  %td(style="position:relative")
    = index
    - if can? :manage, Substrate
      .handle-box
        .handle
          %i.icon-move.icon-white
  %td.substrate-title
    = link_to substrate.title, substrate
    %span.substrates-actions
      - if can? :manage, Substrate
        = link_to edit_substrate_path(substrate), class: 'btn-small btn' do
          %span.icon.icon-pencil
  %td= substrate.drawing
  %td= substrate.number
  %td.substrate-state
    - if can? :manage, Substrate
      = best_in_place substrate, :state, as: :select, collection: Substrate::STATES.collect {|state| [ state, t("substrates.states.#{state}")]}, inner_class: 'substrate-select', data: {place_success: substrate.id}, class: 'remote-link'
    - else
      = t "substrates.states.#{substrate.state}"
  %td= substrate.theme
  %td= substrate.desc
  %td.substrate_user= link_to substrate.user.profile.surname, user_profile_path(substrate.user) if substrate.user
