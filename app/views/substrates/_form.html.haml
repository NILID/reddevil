= bootstrap_form_for @substrate, html: { class: 'form-horizontal' } do |f|
  - if can? :manage, :all
    = f.text_field :category, value: @substrate.category || params[:category]
  - else
    = f.hidden_field :category, value: @substrate.category || params[:category]
  = f.text_field :title, class: 'text_field input-xxlarge'
  = f.text_field :drawing, class: 'text_field input-xxlarge'
  = f.text_field :number, class: 'text_field input-xxlarge'
  - if @substrate.category == 'mirror' || params[:category] == 'mirror'
    - states = Substrate::MIRROR_STATES.collect {|state| [ t("mirrors.states.#{state}"), state]}
  - else
    - states = Substrate::STATES.collect {|state| [t("substrates.states.#{state}"), state]}
  = f.select :state, states, {include_blank: t('substrates.select')}
  - if @substrate.category == 'mirror' || params[:category] == 'mirror'
    = f.select :substrate_id, @substrates.collect {|s| [s.child_title, s.id]}, {include_blank: t('substrates.select_substrate')}
  = f.text_field :theme, class: 'text_field input-xxlarge'
  = f.text_area :desc, class: 'text_area input-xxlarge', rows: 4
  .form-actions
    = f.submit t('shared.save'), class: 'btn btn-primary'
    = link_to t('shared.cancel'), :back, class: 'btn'
